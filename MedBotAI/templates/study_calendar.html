{% extends "layout.html" %}

{% block content %}
<!-- Study Planner View -->
<div class="tool-view active" id="study-planner-view">
  <div class="tool-content">
    <div class="tool-header">
      <h1 class="tool-title">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect>
          <line x1="16" x2="16" y1="2" y2="6"></line>
          <line x1="8" x2="8" y1="2" y2="6"></line>
          <line x1="3" x2="21" y1="10" y2="10"></line>
        </svg>
        AI Study Planner
      </h1>
      <p class="tool-description">Create personalized study plans for your medical education journey</p>
    </div>
    
    <div class="study-planner-container">
      <div class="tool-card">
        <div class="tool-card-content">
          <div class="tool-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
            </svg>
          </div>
          <h2 class="tool-card-title">Upload Syllabus</h2>
          <p class="tool-card-description">
            Upload your course syllabus PDF and MedBot AI will extract important dates, assignments, and exams to create a personalized study plan.
          </p>
          <form id="uploadForm">
            <div class="form-group">
              <label for="syllabusFile" class="form-label">Select PDF File:</label>
              <input type="file" class="form-control" id="syllabusFile" name="file" accept="application/pdf" required>
            </div>
            <button type="submit" class="primary-button">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="17 8 12 3 7 8"></polyline>
                <line x1="12" y1="3" x2="12" y2="15"></line>
              </svg>
              Upload Syllabus
            </button>
          </form>
          <div class="alert alert-success" id="uploadSuccess" style="display: none;">Syllabus uploaded successfully!</div>
          <div class="alert alert-danger" id="uploadError" style="display: none;"></div>
        </div>
      </div>
      
      <div class="tool-card">
        <div class="tool-card-content">
          <div class="tool-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path>
            </svg>
          </div>
          <h2 class="tool-card-title">Generate Study Plan</h2>
          <p class="tool-card-description">
            Generate a personalized study plan based on your syllabus. The plan will include study sessions, assignment deadlines, and exam preparation.
          </p>
          <button id="generatePlanBtn" class="primary-button">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path>
            </svg>
            Generate Plan
          </button>
          <div class="alert alert-success" id="generateSuccess" style="display: none;">Study plan generated successfully!</div>
          <div class="alert alert-danger" id="generateError" style="display: none;"></div>
        </div>
      </div>
      
      <div class="tool-card">
        <div class="tool-card-content">
          <div class="tool-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect>
              <line x1="16" x2="16" y1="2" y2="6"></line>
              <line x1="8" x2="8" y1="2" y2="6"></line>
              <line x1="3" x2="21" y1="10" y2="10"></line>
            </svg>
          </div>
          <h2 class="tool-card-title">Manage Calendar</h2>
          <p class="tool-card-description">
            Add your study plan to Google Calendar to keep track of your study sessions, assignments, and exams.
          </p>
          <div class="button-group">
            <button id="addToCalendarBtn" class="primary-button">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect>
                <line x1="16" x2="16" y1="2" y2="6"></line>
                <line x1="8" x2="8" y1="2" y2="6"></line>
                <line x1="3" x2="21" y1="10" y2="10"></line>
                <line x1="12" y1="15" x2="12" y2="19"></line>
                <line x1="10" y1="17" x2="14" y2="17"></line>
              </svg>
              Add to Calendar
            </button>
            <button id="clearCalendarBtn" class="primary-button" style="background-color: hsl(var(--destructive));">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 6h18"></path>
                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
              </svg>
              Clear Calendar
            </button>
          </div>
          <div class="alert alert-success" id="calendarSuccess" style="display: none;"></div>
          <div class="alert alert-danger" id="calendarError" style="display: none;"></div>
          <iframe id="calendarEmbed" style="display: none;"></iframe>
        </div>
      </div>
      
      <div class="tool-card">
        <div class="tool-card-content">
          <div class="tool-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect>
              <line x1="16" x2="16" y1="2" y2="6"></line>
              <line x1="8" x2="8" y1="2" y2="6"></line>
              <line x1="3" x2="21" y1="10" y2="10"></line>
            </svg>
          </div>
          <h2 class="tool-card-title">Google Calendar</h2>
          <p class="tool-card-description">
            View your study plan directly in Google Calendar.
          </p>
          <iframe src="https://calendar.google.com/calendar/embed?src=your_calendar_id&ctz=Your_Timezone" style="border: 0" width="800" height="600" frameborder="0" scrolling="no"></iframe>
        </div>
      </div>
      
      <div id="planDisplay" class="plan-display"></div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Mark the study planner menu item as active
    const studyPlannerMenuItem = document.querySelector('.sidebar-menu-item[data-tool="study-planner"]');
    if (studyPlannerMenuItem) {
      studyPlannerMenuItem.classList.add('active');
    }
  });
</script>
{% endblock %} 